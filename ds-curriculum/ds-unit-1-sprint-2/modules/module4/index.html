<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 4: Linear Correlation and Regression - Data Science Sprint 2</title>
    <link rel="stylesheet" href="../../../css/style.css">
</head>

<body>
    <header>
        <nav>
            <div class="logo">Data Science Unit 1</div>
            <ul>
                <li><a href="../../index.html">Home</a></li>
                <li class="dropdown">
                    <a href="#" class="active">Modules</a>
                    <div class="dropdown-content">
                        <a href="../module1/index.html">Module 1: Hypothesis Testing (t-tests)</a>
                        <a href="../module2/index.html">Module 2: Hypothesis Testing (chi-square)</a>
                        <a href="../module3/index.html">Module 3: Bayesian Statistics</a>
                        <a href="../module4/index.html" class="active">Module 4: Linear Correlation and Regression</a>
                    </div>
                </li>
                <li><a href="../../code-alongs/index.html">Code-Alongs</a></li>
                <li><a href="../../sprint-challenge/index.html">Sprint Challenge</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <h1>Module 4: Linear Correlation and Regression</h1>

        <section class="content-box">
            <h2>Module Overview</h2>
            <p>In this module, we'll transition from hypothesis testing to understanding and quantifying relationships
                between variables. Linear correlation and regression are foundational statistical techniques used to
                measure the strength of relationships between variables and to build predictive models.</p>
            <p>These methods allow us to answer questions like: How strongly are two variables related? Can we use one
                variable to predict another? Is there a meaningful linear relationship between variables? These are
                crucial skills for data scientists, as they form the basis for more advanced predictive modeling
                techniques.</p>
        </section>

        <section class="content-box">
            <h2>Learning Objectives</h2>
            <ul>
                <li>Distinguish between independent and dependent variables</li>
                <li>Distinguish between linear and non-linear relationships</li>
                <li>Calculate the linear correlation using the scipy.stats library</li>
                <li>Calculate and interpret the slope and intercept</li>
                <li>Calculate a prediction and a residual</li>
            </ul>
        </section>

        <section class="content-box">
            <h2>Objective 01 - Distinguish Between Independent and Dependent Variables and Connect With the Terms
                Features and Target</h2>
            <h3>Overview</h3>
            <p>
                In this module, we are going to learn how to measure the linear relationship between quantitative
                variables. A quantitative variable usually measures something, such as counts, percents, numbers, and
                dates. It can take on a range of values.
            </p>
            <p>
                When we want to determine a relationship between variables, we'll often plot them on a scatter plot. In
                this objective, we'll learn how to distinguish between independent variables and dependent variables.
            </p>

            <h3>Visualize the Data</h3>
            <p>
                Let's look at some data to get started. This data set is available from the <a
                    href="https://archive.ics.uci.edu/ml/datasets/concrete+compressive+strength" target="_blank"
                    rel="noopener noreferrer">UCI Machine Learning Repository</a>. It contains information about how the
                compressive strength of concrete depends on the different properties of the mixture.
            </p>
            <p>
                We will use this data throughout this module to learn how to identify dependent and independent
                variables.
            </p>
            <p>
                Let's go ahead and load in the data to get started.
            </p>
            <pre><code>import pandas as pd

url = 'https://raw.githubusercontent.com/bloominstituteoftechnology/data-science-practice-datasets/main/unit_1/Concrete/Concrete_Data.csv'

concrete = pd.read_csv(url)

concrete.head()</code></pre>
            <div class="table-responsive">
                <table class="custom-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>cement</th>
                            <th>furnace</th>
                            <th>fly_ash</th>
                            <th>water</th>
                            <th>super_plasticize</th>
                            <th>coarse_agg</th>
                            <th>fine_agg</th>
                            <th>age</th>
                            <th>strength</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>540.0</td>
                            <td>0.0</td>
                            <td>0.0</td>
                            <td>162.0</td>
                            <td>2.5</td>
                            <td>1040.0</td>
                            <td>676.0</td>
                            <td>28</td>
                            <td>79.99</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>540.0</td>
                            <td>0.0</td>
                            <td>0.0</td>
                            <td>162.0</td>
                            <td>2.5</td>
                            <td>1055.0</td>
                            <td>676.0</td>
                            <td>28</td>
                            <td>61.89</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>332.5</td>
                            <td>142.5</td>
                            <td>0.0</td>
                            <td>228.0</td>
                            <td>0.0</td>
                            <td>932.0</td>
                            <td>594.0</td>
                            <td>270</td>
                            <td>40.27</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>332.5</td>
                            <td>142.5</td>
                            <td>0.0</td>
                            <td>228.0</td>
                            <td>0.0</td>
                            <td>932.0</td>
                            <td>594.0</td>
                            <td>365</td>
                            <td>41.05</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>198.6</td>
                            <td>132.4</td>
                            <td>0.0</td>
                            <td>192.0</td>
                            <td>0.0</td>
                            <td>978.4</td>
                            <td>825.5</td>
                            <td>360</td>
                            <td>44.30</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>
                All of these variables are numeric, so we have some choices. We'll start by looking at the amount of
                cement in the concrete mixture (<code>cement</code>) and the compressive strength of the cement
                (<code>strength</code>). When we create a plot, we need to choose which axis to plot each variable. So,
                how do we decide?
            </p>
            <p>
                As you can see in the DataFrame, we have several columns containing physical measurements of the
                concrete, such as water content, the number of different aggregates, and even the age. But one of the
                columns is different: the concrete's compressive strength (<code>strength</code>) depends on all of
                these other measurements.
            </p>
            <p>
                In this case, we state that the cement content is the independent variable, and the strength is the
                dependent variable. When we create a two-dimensional plot, the independent variables go on the x-axis
                and the dependent variable on the y-axis.
            </p>
            <p>
                Let's look at our plot.
            </p>
            <pre><code># Create the visualization

import matplotlib.pyplot as plt

plt.scatter(x=concrete['cement'], y=concrete['strength'])
plt.xlabel('Cement content (kg/cubic meter)')
plt.ylabel('Compressive strength')
plt.title('Concrete Properties')

#plt.show()
plt.clf()</code></pre>
            <img src="https://raw.githubusercontent.com/bloominstituteoftechnology/data-science-canvas-images/main/unit_1/sprint_3/new/mod1_obj1_concrete1.png"
                alt="mod1_obj1_concrete1.png" loading="lazy">
            <p>
                In the plot above, we can see a relationship (even a slight one) between our two variables. For example,
                we could state it like this: as the cement content increases, the compressive strength of the concrete
                also increases. We'll come back to this type of relationship later in the module. But first, let's go
                back to the dependent and independent variable terms.
            </p>

            <h3>Independent and Dependent Variables</h3>
            <p>
                In our plot, the compressive strength is the dependent variable. It changes when the other variables
                change, such as the cement content. Therefore, dependent variables are the <strong>target</strong> when
                we discuss predictive models. In other words, the target is what we're trying to predict.
            </p>
            <p>
                And because the amount of cement is the quantity we control and can change in our data collection, this
                variable is referred to as the <strong>independent variable</strong>. In predictive modeling, these
                variables are <strong>features</strong>. We use the features to predict the target. For example, we have
                one feature (<code>cement</code>) and one target (<code>strength</code>) in the data plotted above.
            </p>
            <p>
                Let's consider a few other datasets and identify the dependent and independent variables.
            </p>

            <h3>Follow Along</h3>
            <p>
                Consider the following situations (try to identify the dependent/independent variables before reading
                the answer):
            </p>
            <ul>
                <li>
                    You measure how the amount of sugar affects the taste of coffee. What are the dependent and
                    independent variables? (In this case, we change the amount of sugar (independent) and measure how it
                    affects taste (dependent)).
                </li>
                <li>
                    You would like to examine medication dosage and the severity of specific symptoms. What are the
                    dependent and independent variables? (The dosage is the independent variable, and the symptom
                    severity is dependent on the dosage).
                </li>
                <li>
                    And the final problem (this one might be a little trickier):<br>
                    You have measurements for the amount of a particular compound in the atmosphere and the average
                    global temperature record for many thousands of years. What are the dependent and independent
                    variables here? (The temperature depends on the amount of the compound. Even though we can't change
                    the atmospheric composition in our observational study, it is the independent variable).
                </li>
            </ul>

            <h3>Challenge</h3>
            <p>
                You're probably already familiar with the <a href="https://archive.ics.uci.edu/ml/datasets.php"
                    target="_blank" rel="noopener noreferrer">UCI Machine Learning Repository</a>. Right now would be an
                excellent time
                to explore the available datasets for this challenge. You can even select the types of problems
                (regression, classification) you would use to filter your datasets. Select a few datasets, read over the
                descriptions, and identify the dependent/independent variables. The variables will often be the features
                and target, so pay attention to that wording.
            </p>
        </section>

        <section class="content-box">
            <h2>Objective 02 - Distinguish Between Linear and Nonlinear Relationships on a Scatterplot and Calculate a
                Linear Correlation</h2>
            <h3>Overview</h3>
            <p>
                In the first part of the module, we introduced independent and dependent variables and practiced
                identifying them in different datasets. We also looked at a scatterplot of a dataset to illustrate which
                axis to plot the dependent and independent variables.
            </p>
            <p>
                Now, we're going to look more closely at the data and any patterns or correlations between the
                variables. Again, visualizations like scatterplots are a great way to plot a few variables and see any
                correlations.
            </p>

            <h3>Correlation</h3>
            <p>
                In general, correlation is a statistical term that describes the relationship between two random
                variables. But correlation, as used in the term linear correlation, is the degree to which two variables
                are linearly related. In other words, when we plot two variables on a scatterplot, could we draw a line
                through the data in any direction? If we draw a line, the resulting slope can tell us how the two
                variables are correlated.
            </p>

            <h3>Degree of Correlation</h3>
            <p>
                We can measure how well two variables are correlated. This measurement ranges between -1 and 1:
            </p>
            <ul>
                <li>-1: Two variables are negatively correlated where an increase in one results in a decrease in the
                    other</li>
                <li>0: There is no linear relationship between two variables (though they can have a non-linear
                    relationship)</li>
                <li>+1: Two variables are positively correlated where an increase in one increases the other</li>
            </ul>

            <h3>Follow Along</h3>
            <p>
                Let's look at the concrete strength dataset from the previous objective. We don't need to use all of the
                columns, so we'll only load some features. Having looked at the data previously, we can see that some
                variables are correlated more closely than others. So, we'll select cement, water, course_agg, and
                strength for the following analysis.
            </p>
            <pre><code>import pandas as pd

url = 'https://raw.githubusercontent.com/bloominstituteoftechnology/data-science-practice-datasets/main/unit_1/Concrete/Concrete_Data.csv'

# Use these columns:
mycols = ['cement', 'water','coarse_agg', 'strength']
concrete = pd.read_csv(url, usecols=mycols)
</code></pre>
            <p>
                Now, let's create a pair plot! The seaborn plotting library has a particular type of plot called a pair
                plot: we can look at pairs of variables on a grid of scatter plots. It's a convenient way to quickly
                look at your data and identify any characteristics or correlations you would like to explore further.
            </p>
            <pre><code>import matplotlib.pyplot as plt
import seaborn as sns

sns.pairplot(concrete)

plt.savefig('/Users/nicole/data_science_LS/data-science-canvas-images/unit_1/sprint_3/new/mod1_obj2_concrete_pair.png', 
            transparent=False, dpi=100)

plt.show()
plt.clf()
</code></pre>
            <img src="https://raw.githubusercontent.com/bloominstituteoftechnology/data-science-canvas-images/main/unit_1/sprint_3/new/mod1_obj2_concrete_pair.png"
                alt="mod1_obj2_concrete_pair.png" loading="lazy">
            <p>
                In the plot above, we can see our four features and how they correlate with each other. We'll choose two
                of these features and calculate the correlation between them. First, we'll look at these features: the
                strength and cement content (cement) and the strength and water content (water).
            </p>
            <p>
                To find the correlation between our variables, we'll calculate the Pearson correlation coefficient.
                Calculating the Pearson correlation is determined by finding the covariance of the two variables and
                dividing by the product of the standard deviation of each data sample. In other words, we are
                calculating the normalization of the covariance between the two variables.
            </p>
            <pre><code>from scipy.stats import pearsonr

# Calculate the correlation coefficient
# (return only the coefficient)
strength_cement, _ = pearsonr(concrete['strength'], concrete['cement'])
strength_water, _ = pearsonr(concrete['strength'], concrete['water'])

print('The correlation between strength-cement:', round(strength_cement, 3))
print('The correlation between strength-water:', round(strength_water, 2))
</code></pre>
            <pre>
The correlation between strength-cement: 0.498
The correlation between strength-water: -0.29</pre>
            <p>
                In this example, we see a positive correlation between concrete strength and cement content - as the
                cement increases, the strength of the concrete increases. On the other hand, as the water content
                increases, the strength of the cement decreases, as indicated by the negative correlation coefficient.
            </p>

            <h3>Challenge</h3>
            <p>
                There are still several sets of variables for which we haven't calculated the correlation. Following the
                same steps as above, calculate the correlation coefficients for some of those variables. To challenge
                yourself, look at the pair plot or scatterplot first, and predict if the correlation is positive or
                negative.
            </p>

            <h3>Additional Resources</h3>
            <ul>
                <li><a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pearsonr.html"
                        target="_blank" rel="noopener noreferrer">Scipy: Pearson correlation coefficient</a></li>
                <li><a href="https://machinelearningmastery.com/how-to-use-correlation-to-understand-the-relationship-between-variables/"
                        target="_blank" rel="noopener noreferrer">How to Calculate Correlation Between Variables in
                        Python</a></li>
                <li><a href="https://seaborn.pydata.org/generated/seaborn.pairplot.html" target="_blank"
                        rel="noopener noreferrer">Seaborn: pairplots</a></li>
            </ul>
        </section>

        <section class="content-box">
            <h2>Objective 03 - Calculate and Interpret the Slope and Intercept of a Simple Linear Regression Model and
                Make a Prediction</h2>
            <h3>Overview</h3>
            <p>
                In this module so far, we've explored dependent/independent variables, created scatter plots, and
                calculated linear correlations for sets of variables. Now we're going to learn how to fit our first
                model to data: a linear regression. Regression is a statistical method for determining the relationship
                between variables. Linear regression is the process of finding a line that best fits a given set of
                data.
            </p>
            <h3>Ordinary Least Squares</h3>
            <p>
                So how do we find this line? The method of ordinary least squares (OLS)! Right now, we'll stick to a
                relatively simple explanation and save the derivations and the discussion of how this method works for
                later in the course (or even self-study - see the Additional Resources section at the bottom for more
                information).
            </p>
            <p>
                The ordinary least squared method finds a best-fit line by finding the parameters for the line equation
                that minimizes the error square.
            </p>
            <h3>Linear Equations</h3>
            <p>
                One of the most common ways to represent a line is with the equation
            </p>
            <pre><code>y = mx + b</code></pre>
            <p>
                where x is our independent variable (or feature) and y is the dependent variable (or target). The value
                of m is the slope of the line and b is the intercept.
            </p>
            <p>
                But we're going to use a different more general notation, using the letter b (sometimes this term is a
                beta or &beta;).
            </p>
            <pre><code>y = b<sub>0</sub> + b<sub>1</sub>x</code></pre>
            <p>
                where b<sub>0</sub> is now the intercept and b<sub>1</sub> is the slope. The x and y variables are still
                the same as above; we've only changed the constants. You may see a slightly different representation in
                the Guided Project - don't panic! Look carefully at each equation and identify what looks different.
                This is also part of learning math and being comfortable using it in data science applications.
            </p>
            <p>
                Let's look at a plot of a line and identify the slope and intercept. Then we'll move onto some real data
                and fit a line.
            </p>
            <pre><code># Import the predictor class

from sklearn.linear_model import LinearRegression

# Instantiate the class (with default parameters)

model = LinearRegression()

# Assign the data to the x and y variables (easier to see what we are fitting)

x = concrete['cement']

# Add a new axis to create a column vector

# (scikit-learn expects the data to be in this shape)

X = np.array(x)[:, np.newaxis]

y = concrete['strength']

# Fit the model - so exciting!

model.fit(X, y)
</code></pre>
            <img style="color: var(--ic-brand-font-color-dark); font-family: inherit; font-size: 1rem;"
                src="https://raw.githubusercontent.com/bloominstituteoftechnology/data-science-canvas-images/main/unit_1/sprint_3/new/mod1_obj3_linear_reg1.png"
                alt="mod1_obj3_linear_reg1.png" loading="lazy">
            <p>
                In the plot, we can see the intercept is two and the slope is equal to three. The slope is the change in
                y over the change in x; from the plot we can do a quick calculation: (change_y/change_x) = (20-2)/(6-0)
                = 18/6 = 3.
            </p>
            <p>
                We didn't fit any data to a line yet, so follow along in the next section while we implement a linear
                regression.
            </p>
            <h3>Follow Along</h3>
            <ul>
                <li>load in the concrete data</li>
                <li>fit a linear regression</li>
                <li>look at the coefficients</li>
                <li>make a prediction</li>
            </ul>
            <p>
                We'll use the concrete strength data set again and fit a linear regression to the concrete strength
                (<code>strength</code>) and cement content (<code>cement</code>). We'll read in the whole dataset, in
                case we'd like to use more than one feature to fit a linear regression.
            </p>
            <pre><code>import pandas as pd

url = 'https://raw.githubusercontent.com/bloominstituteoftechnology/data-science-practice-datasets/main/unit_1/Concrete/Concrete_Data.csv'

concrete = pd.read_csv(url)

concrete.head()</code></pre>
            <div class="table-responsive">
                <table class="custom-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>cement</th>
                            <th>furnace</th>
                            <th>fly_ash</th>
                            <th>water</th>
                            <th>super_plasticize</th>
                            <th>coarse_agg</th>
                            <th>fine_agg</th>
                            <th>age</th>
                            <th>strength</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>540.0</td>
                            <td>0.0</td>
                            <td>0.0</td>
                            <td>162.0</td>
                            <td>2.5</td>
                            <td>1040.0</td>
                            <td>676.0</td>
                            <td>28</td>
                            <td>79.99</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>540.0</td>
                            <td>0.0</td>
                            <td>0.0</td>
                            <td>162.0</td>
                            <td>2.5</td>
                            <td>1055.0</td>
                            <td>676.0</td>
                            <td>28</td>
                            <td>61.89</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>332.5</td>
                            <td>142.5</td>
                            <td>0.0</td>
                            <td>228.0</td>
                            <td>0.0</td>
                            <td>932.0</td>
                            <td>594.0</td>
                            <td>270</td>
                            <td>40.27</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>332.5</td>
                            <td>142.5</td>
                            <td>0.0</td>
                            <td>228.0</td>
                            <td>0.0</td>
                            <td>932.0</td>
                            <td>594.0</td>
                            <td>365</td>
                            <td>41.05</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>198.6</td>
                            <td>132.4</td>
                            <td>0.0</td>
                            <td>192.0</td>
                            <td>0.0</td>
                            <td>978.4</td>
                            <td>825.5</td>
                            <td>360</td>
                            <td>44.30</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>
                We're going to use the scikit-learn library <code>LinearRegression()</code> model to find our best-fit
                line. You will be working with this library extensively in future sprints, so don't worry if it seems
                confusing at first. Just pay attention to the comments in the code and then look at how we pull the
                slope and intercept from the results of the model.
            </p>
            <pre><code># Import the predictor class
from sklearn.linear_model import LinearRegression

# Instantiate the class (with default parameters)
model = LinearRegression()

# Assign the data to the x and y variables (easier to see what we are fitting)

x = concrete['cement']
# Add a new axis to create a column vector 
# (scikit-learn expects the data to be in this shape)
X = x[:, np.newaxis]

y = concrete['strength']

# Fit the model - so exciting!
model.fit(X, y)
</code></pre>
            <pre>
LinearRegression(copy_X=True, fit_intercept=True, n_jobs=None, normalize=False)</pre>
            <p>
                Cool! Now, we'll pull the slope and intercept parameters out of the model that we fit.
            </p>
            <pre><code># Slope (also called the model coefficient)
print('The slope: ', model.coef_)

# Intercept
print('The intercept: ', model.intercept_)

# In equation form
print('Best-fit line: y = {:.2f}x + {:.2f}'.format(model.coef_[0], model.intercept_))
</code></pre>
            <pre>
The slope:  [0.07958034]
The intercept:  13.44252811239992
Best-fit line: y = 0.08x + 13.44</pre>
            <p>
                We'll now plot the data and the best-fit line.
            </p>
            <pre><code>import matplotlib.pyplot as plt

# Plot the data
plt.scatter(x=x, y=y, alpha=0.5)

# Plot the best-fit line
x_bestfit = np.linspace(100, 600, 10)
y_bestfit = 0.08*x_bestfit + 13.44
plt.plot(x_bestfit, y_bestfit, color='red')

plt.xlabel('Cement content (kg/cubic meter)')
plt.ylabel('Compressive strength')
plt.title('Concrete Properties')

#plt.show()
plt.clf()
</code></pre>
            <pre>
&lt;Figure size 432x288 with 0 Axes&gt;</pre>
            <img src="https://raw.githubusercontent.com/bloominstituteoftechnology/data-science-canvas-images/main/unit_1/sprint_3/new/mod1_obj3_linear_reg2.png"
                alt="mod1_obj3_linear_reg2.png" loading="lazy">
            <h3>Making a Prediction</h3>
            <p>
                We're finally at the fun part: making predictions with our model. In the above example, where we fit a
                linear regression model to our concrete data, we might want to use our results to make a prediction.
                Now, there isn't a very strong correlation between cement content and the strength of concrete. But, we
                can still make a prediction with our results.
            </p>
            <p>
                We'll select a value of our independent variable (cement content) and predict the strength. Let's choose
                cement=600 and plug it into our equation for the best-fit line:
            </p>
            <div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG"
                    id="MathJax-Element-6-Frame" tabindex="0"
                    style="font-size: 100%; display: inline-block; position: relative;"
                    data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0.08&lt;/mn&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;13.44&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0.08&lt;/mn&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;mn&gt;600&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;13.44&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;61&lt;/mn&gt;&lt;/math&gt;"
                    role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.33ex" height="2.355ex"
                        viewBox="0 -746.2 19086.5 1013.9" role="img" focusable="false" style="vertical-align: -0.622ex;"
                        aria-hidden="true">
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#MJMATHI-79" x="0" y="0"></use>
                            <use xlink:href="#MJMAIN-3D" x="775" y="0"></use>
                            <g transform="translate(1831,0)">
                                <use xlink:href="#MJMAIN-30"></use>
                                <use xlink:href="#MJMAIN-2E" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-30" x="779" y="0"></use>
                                <use xlink:href="#MJMAIN-38" x="1279" y="0"></use>
                            </g>
                            <use xlink:href="#MJMATHI-78" x="3611" y="0"></use>
                            <use xlink:href="#MJMAIN-2B" x="4406" y="0"></use>
                            <g transform="translate(5407,0)">
                                <use xlink:href="#MJMAIN-31"></use>
                                <use xlink:href="#MJMAIN-33" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-2E" x="1001" y="0"></use>
                                <use xlink:href="#MJMAIN-34" x="1279" y="0"></use>
                                <use xlink:href="#MJMAIN-34" x="1780" y="0"></use>
                            </g>
                            <use xlink:href="#MJMAIN-3D" x="7965" y="0"></use>
                            <g transform="translate(9021,0)">
                                <use xlink:href="#MJMAIN-30"></use>
                                <use xlink:href="#MJMAIN-2E" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-30" x="779" y="0"></use>
                                <use xlink:href="#MJMAIN-38" x="1279" y="0"></use>
                            </g>
                            <use xlink:href="#MJMAIN-2217" x="11023" y="0"></use>
                            <g transform="translate(11746,0)">
                                <use xlink:href="#MJMAIN-36"></use>
                                <use xlink:href="#MJMAIN-30" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-30" x="1001" y="0"></use>
                            </g>
                            <use xlink:href="#MJMAIN-2B" x="13470" y="0"></use>
                            <g transform="translate(14470,0)">
                                <use xlink:href="#MJMAIN-31"></use>
                                <use xlink:href="#MJMAIN-33" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-2E" x="1001" y="0"></use>
                                <use xlink:href="#MJMAIN-34" x="1279" y="0"></use>
                                <use xlink:href="#MJMAIN-34" x="1780" y="0"></use>
                            </g>
                            <use xlink:href="#MJMAIN-3D" x="17029" y="0"></use>
                            <g transform="translate(18085,0)">
                                <use xlink:href="#MJMAIN-36"></use>
                                <use xlink:href="#MJMAIN-31" x="500" y="0"></use>
                            </g>
                        </g>
                    </svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math
                            xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                            <mi>y</mi>
                            <mo>=</mo>
                            <mn>0.08</mn>
                            <mi>x</mi>
                            <mo>+</mo>
                            <mn>13.44</mn>
                            <mo>=</mo>
                            <mn>0.08</mn>
                            <mo>∗</mo>
                            <mn>600</mn>
                            <mo>+</mo>
                            <mn>13.44</mn>
                            <mo>=</mo>
                            <mn>61</mn>
                        </math></span></span></div>
            <p>
                We can read this value off the graph, as expected. In the next module, we'll talk about the statistics
                of making predictions from our models.
            </p>
            <h3>Challenge</h3>
            <p>
                Now it's your turn! First, you can look at one of the other variables, like water content
                (<code>water</code>), and fit a linear regression model. Then plot the line along with your data. Are
                the slope and intercept parameters different?
            </p>
            <h3>Additional Resources</h3>
            <ul>
                <li><a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html"
                        target="_blank" rel="noopener noreferrer">scikit-learn: Linear Regression</a></li>
                <li><a href="https://machinelearningmastery.com/linear-regression-for-machine-learning/" target="_blank"
                        rel="noopener noreferrer">Linear Regression in Python</a></li>
            </ul>
        </section>

        <section class="content-box">
            <h2>Objective 04 - Calculate a Residual</h2>
            <h3>Overview</h3>
            <p>
                In this module so far, we've covered the basics of identifying dependent and independent variables,
                calculating correlation, fitting a linear regression model, and making a prediction. Now, we're going to
                introduce the concept of a residual.
            </p>
            <p>
                When we make a prediction, we then have predicted values. But remember, there are also the observed
                values. A residual is a difference between the predicted value and the observed value for a given data
                point.
            </p>
            <p>
                To determine the parameters when fitting a linear model, we want to minimize the residuals. In other
                words, when we sum up all of the residuals for all of the data points, we want to find the slope and
                intercept that results in the smallest residual.
            </p>
            <h3>Follow Along</h3>
            <p>
                Using the concrete strength example from the previous objectives, let's calculate the residual for one
                of the data points.
            </p>
            <pre><code>import pandas as pd

url = 'https://raw.githubusercontent.com/bloominstituteoftechnology/data-science-practice-datasets/main/unit_1/Concrete/Concrete_Data.csv'

concrete = pd.read_csv(url)

concrete.head()</code></pre>
            <div class="table-responsive">
                <table class="custom-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>cement</th>
                            <th>furnace</th>
                            <th>fly_ash</th>
                            <th>water</th>
                            <th>super_plasticize</th>
                            <th>coarse_agg</th>
                            <th>fine_agg</th>
                            <th>age</th>
                            <th>strength</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>540.0</td>
                            <td>0.0</td>
                            <td>0.0</td>
                            <td>162.0</td>
                            <td>2.5</td>
                            <td>1040.0</td>
                            <td>676.0</td>
                            <td>28</td>
                            <td>79.99</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>540.0</td>
                            <td>0.0</td>
                            <td>0.0</td>
                            <td>162.0</td>
                            <td>2.5</td>
                            <td>1055.0</td>
                            <td>676.0</td>
                            <td>28</td>
                            <td>61.89</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>332.5</td>
                            <td>142.5</td>
                            <td>0.0</td>
                            <td>228.0</td>
                            <td>0.0</td>
                            <td>932.0</td>
                            <td>594.0</td>
                            <td>270</td>
                            <td>40.27</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>332.5</td>
                            <td>142.5</td>
                            <td>0.0</td>
                            <td>228.0</td>
                            <td>0.0</td>
                            <td>932.0</td>
                            <td>594.0</td>
                            <td>365</td>
                            <td>41.05</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>198.6</td>
                            <td>132.4</td>
                            <td>0.0</td>
                            <td>192.0</td>
                            <td>0.0</td>
                            <td>978.4</td>
                            <td>825.5</td>
                            <td>360</td>
                            <td>44.30</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>
                Using the fifth data point (index 4), we'll plug the cement content value of 198.6 into our linear
                regression equation. Recall the parameters for the best-fit line are:
            </p>
            <div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG"
                    id="MathJax-Element-1-Frame" tabindex="0"
                    style="font-size: 100%; display: inline-block; position: relative;"
                    data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0.08&lt;/mn&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;13.44&lt;/mn&gt;&lt;/math&gt;"
                    role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.855ex"
                        height="2.355ex" viewBox="0 -746.2 7687.5 1013.9" role="img" focusable="false"
                        style="vertical-align: -0.622ex;" aria-hidden="true">
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#MJMATHI-79" x="0" y="0"></use>
                            <use xlink:href="#MJMAIN-3D" x="775" y="0"></use>
                            <g transform="translate(1831,0)">
                                <use xlink:href="#MJMAIN-30"></use>
                                <use xlink:href="#MJMAIN-2E" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-30" x="779" y="0"></use>
                                <use xlink:href="#MJMAIN-38" x="1279" y="0"></use>
                            </g>
                            <use xlink:href="#MJMATHI-78" x="3611" y="0"></use>
                            <use xlink:href="#MJMAIN-2B" x="4406" y="0"></use>
                            <g transform="translate(5407,0)">
                                <use xlink:href="#MJMAIN-31"></use>
                                <use xlink:href="#MJMAIN-33" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-2E" x="1001" y="0"></use>
                                <use xlink:href="#MJMAIN-34" x="1279" y="0"></use>
                                <use xlink:href="#MJMAIN-34" x="1780" y="0"></use>
                            </g>
                        </g>
                    </svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math
                            xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                            <mi>y</mi>
                            <mo>=</mo>
                            <mn>0.08</mn>
                            <mi>x</mi>
                            <mo>+</mo>
                            <mn>13.44</mn>
                        </math></span></span></div>
            <p>
                where y is the predicted concrete strength and x is the cement content. Substituting into our equation
                gives us:
            </p>
            <div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG"
                    id="MathJax-Element-2-Frame" tabindex="0"
                    style="font-size: 100%; display: inline-block; position: relative;"
                    data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0.08&lt;/mn&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;mn&gt;198.6&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;13.44&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;29.3&lt;/mn&gt;&lt;/math&gt;"
                    role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="31.249ex"
                        height="2.355ex" viewBox="0 -746.2 13454.5 1013.9" role="img" focusable="false"
                        style="vertical-align: -0.622ex;" aria-hidden="true">
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#MJMATHI-79" x="0" y="0"></use>
                            <use xlink:href="#MJMAIN-3D" x="775" y="0"></use>
                            <g transform="translate(1831,0)">
                                <use xlink:href="#MJMAIN-30"></use>
                                <use xlink:href="#MJMAIN-2E" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-30" x="779" y="0"></use>
                                <use xlink:href="#MJMAIN-38" x="1279" y="0"></use>
                            </g>
                            <use xlink:href="#MJMAIN-2217" x="3833" y="0"></use>
                            <g transform="translate(4556,0)">
                                <use xlink:href="#MJMAIN-31"></use>
                                <use xlink:href="#MJMAIN-39" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-38" x="1001" y="0"></use>
                                <use xlink:href="#MJMAIN-2E" x="1501" y="0"></use>
                                <use xlink:href="#MJMAIN-36" x="1780" y="0"></use>
                            </g>
                            <use xlink:href="#MJMAIN-2B" x="7059" y="0"></use>
                            <g transform="translate(8059,0)">
                                <use xlink:href="#MJMAIN-31"></use>
                                <use xlink:href="#MJMAIN-33" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-2E" x="1001" y="0"></use>
                                <use xlink:href="#MJMAIN-34" x="1279" y="0"></use>
                                <use xlink:href="#MJMAIN-34" x="1780" y="0"></use>
                            </g>
                            <use xlink:href="#MJMAIN-3D" x="10618" y="0"></use>
                            <g transform="translate(11674,0)">
                                <use xlink:href="#MJMAIN-32"></use>
                                <use xlink:href="#MJMAIN-39" x="500" y="0"></use>
                                <use xlink:href="#MJMAIN-2E" x="1001" y="0"></use>
                                <use xlink:href="#MJMAIN-33" x="1279" y="0"></use>
                            </g>
                        </g>
                    </svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math
                            xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                            <mi>y</mi>
                            <mo>=</mo>
                            <mn>0.08</mn>
                            <mo>∗</mo>
                            <mn>198.6</mn>
                            <mo>+</mo>
                            <mn>13.44</mn>
                            <mo>=</mo>
                            <mn>29.3</mn>
                        </math></span></span></div>
            <p>
                The observed strength value for this cement content was 44.3, so the residual is 44.30-29.3 = 15.
            </p>
            <p>
                Not all residuals will be positive or even very large - some will be negative, and some will be very
                small and close to the prediction. The sum of the squares of all residuals is the crucial value and what
                we minimize when fitting a linear regression model.
            </p>
            <h3>Challenge</h3>
            <p>
                Using the same dataset, look through the DataFrame to find another data point to calculate the residual.
                Can you find one that is very close to the prediction, with a slight residual? How about an observation
                that has a large residual?
            </p>
            <h3>Additional Resources</h3>
            <ul>
                <li><a href="https://www.statology.org/how-to-calculate-residuals-in-regression-analysis/"
                        target="_blank" rel="noopener noreferrer">How to Calculate Residuals in Regression Analysis</a>
                </li>
            </ul>
        </section>

        <section class="content-box">
            <h2>Guided Project</h2>
            <p>Open <strong>DS_124_Simple_Linear_Regression.ipynb</strong> in the GitHub repository below to follow
                along with the guided project:</p>
            <div class="resource-links">
                <a href="https://github.com/bloominstituteoftechnology/DS-Unit-1-Sprint-2-Statistics/tree/master/module4-linear-correlation-regression"
                    class="resource-link" target="_blank" rel="noopener noreferrer">GitHub: Linear Correlation and
                    Regression</a>
            </div>

            <h2>Guided Project Video</h2>
            <div class="video-container">
                <iframe class="wistia_embed" title="Sprint 2 Linear Correlation and Regression Video"
                    src="https://fast.wistia.net/embed/iframe/7g8c98yi96" width="640" height="360" allow="fullscreen"
                    loading="lazy"></iframe>
            </div>
        </section>

        <section class="content-box">
            <h2>Module Assignment</h2>
            <p>Complete the Module 4 assignment to practice linear correlation and regression techniques you've learned.
            </p>
            <div class="resource-links">
                <a href="https://github.com/bloominstituteoftechnology/DS-Unit-1-Sprint-2-Statistics/blob/master/module4-linear-correlation-regression/DS_124_Simple_Linear_Regression_Assignment_AG.ipynb"
                    class="resource-link" target="_blank" rel="noopener noreferrer">Module 4 Assignment</a>
            </div>

            <h2>Assignment Solution Video</h2>
            <div class="video-container">
                <iframe class="wistia_embed" title="Module 4 Assignment Solution"
                    src="https://fast.wistia.net/embed/iframe/y8zcqneuj8" width="640" height="360" allow="fullscreen"
                    loading="lazy"></iframe>
            </div>
        </section>

        <section class="content-box">
            <h2>Resources</h2>

            <h3>Correlation Resources</h3>
            <ul>
                <li><a href="https://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/"
                        target="_blank" rel="noopener noreferrer">Correlation Coefficient: Simple Definition, Formula,
                        Example</a>
                </li>
                <li><a href="https://www.khanacademy.org/math/statistics-probability/describing-relationships-quantitative-data"
                        target="_blank" rel="noopener noreferrer">Khan Academy: Describing Relationships</a></li>
            </ul>

            <h3>Regression Resources</h3>
            <ul>
                <li><a href="https://www.statisticshowto.com/probability-and-statistics/regression-analysis/"
                        target="_blank" rel="noopener noreferrer">Regression Analysis: Step by Step Articles, Videos</a>
                </li>
                <li><a href="https://towardsdatascience.com/linear-regression-detailed-view-ea73175f6e86"
                        target="_blank" rel="noopener noreferrer">Linear Regression: A Detailed View</a></li>
                <li><a href="https://www.datacamp.com/community/tutorials/essentials-linear-regression-python"
                        target="_blank" rel="noopener noreferrer">Linear Regression in Python</a></li>
            </ul>
        </section>
    </main>
</body>

</html>